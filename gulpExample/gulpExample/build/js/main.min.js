import{updateRoute}from"./router.js";window.addEventListener("load",updateRoute),window.addEventListener("hashchange",updateRoute);
import utils from"./utils.js";import Observer from"./gallery/observer.js";import GalleryController from"./gallery/gallery.controller.js";import GalleryModel from"./gallery/gallery.model.js";import GalleryView from"./gallery/gallery.view.js";import LoginController from"./login/login.controller.js";import LoginModel from"./login/login.model.js";import LoginView from"./login/login.view.js";let login=document.querySelector("#login-view"),main=document.querySelector("#main-view"),contact=document.querySelector("#contact-view"),activatedRoutes={},routeConfig={"":{show:()=>{utils.showView([login]),utils.hideView([main,contact])},init:()=>{let e=new LoginModel,o=new LoginView;new LoginController(e,o,utils)}},gallery:{show:()=>{utils.showView([main]),utils.hideView([login,contact]),console.log("Main route is loaded")},init:()=>{let e=new Observer,o=new GalleryModel,l=new GalleryView;new GalleryController(o,l,e,new utils)}},contacts:{show:()=>{utils.showView([contact]),utils.hideView([main,login]),console.log("Contacts route is loaded")},init:()=>{}}};function activateRoute(e){if(activatedRoutes[e])activatedRoutes[e]();else{let o=routeConfig[e];o&&(o.init(),o.show(),activatedRoutes[e]=o.show)}}export function updateRoute(){let e=document.location.hash.replace(/^#/,"");e&&!utils.isLoggedIn()?utils.navigateTo(""):activateRoute(e)};
export default class Utils{constructor(){this.sortingConfig={A:e=>(e.sort((e,t)=>e.email>t.email?1:-1),e),Z:e=>(e.sort((e,t)=>e.email<t.email?1:-1),e),Admin:e=>e.filter(e=>"Admin"==e.role),User:e=>e.filter(e=>"User"==e.role),Find:e=>{let t=new RegExp(event.target.value,"i");return e.filter(e=>t.test(e.name))}}}static showView(e){e.forEach(e=>{e.classList.remove("hide")})}static hideView(e){e.forEach(e=>{e.classList.add("hide")})}static navigateTo(e){window.location.hash="#"+e}static isLoggedIn(){return!!JSON.parse(localStorage.getItem("credentials"))}};
export default class LoginController{constructor(t,i,e){this.model=t,this.view=i,this.utils=e,this.initListeners()}initListeners(){this.view.DOMElements.logInBtn.addEventListener("click",this.loginHandler.bind(this)),this.view.DOMElements.logOutBtn.addEventListener("click",this.logoutHandler.bind(this))}loginHandler(t){t.preventDefault();let i=this.view.getCredentials();this.model.validate(i)?this.model.login(i).then(t=>{t.loginStatus?(this.view.hideMsg(),this.view.showLogout(),this.utils.navigateTo("gallery")):this.view.showMsg(this.model.getErrorMsg())}):this.view.showMsg(this.model.getErrorMsg())}logoutHandler(){this.view.hideLogout(),this.model.logout(),this.utils.navigateTo("")}};
export default class LoginModel{constructor(){this.loginUrl="http://localhost:3000/login",this.emailPattern=/^\w+@\w+\.\w{2,4}$/i,this.passwordPattern=/^[a-zA-Z0-9]{8,30}$/,this.errorMsg=null,this.errorMsgMap={empty:"Пожалуйста заполните поля логин и пароль",loginError:"Логин введен неверно. Только латинские буквы.",passError:"Пароль введен неверно. Тольк латинские буквы, цифры. Длина не менее 8 символов",missmatch:"Неправильные логин или пароль."}}validate(t){return this.isEmpty(t)&&this.isEmailAssertPattern(t)&&this.isPasswordAssertPattern(t)}login(t){let r={headers:{"Content-type":"application/json; charset=utf-8"},method:"post",body:JSON.stringify(t)};return fetch(this.loginUrl,r).then(t=>t.json()).then(r=>(r.loginStatus?localStorage.setItem("credentials",JSON.stringify(t)):this.setErrorMsg("missmatch"),r))}getErrorMsg(){return this.errorMsg}setErrorMsg(t){return this.errorMsg=this.errorMsgMap[t],!1}isEmpty(t){return t.login&&t.password||this.setErrorMsg("empty")}isEmailAssertPattern(t){return this.emailPattern.test(t.login)||this.setErrorMsg("loginError")}isPasswordAssertPattern(t){return this.passwordPattern.test(t.password)||this.setErrorMsg("passError")}logout(){localStorage.removeItem("credentials")}};
export default class LoginView{constructor(){this.DOMElements={login:document.querySelector("#inputEmail"),password:document.querySelector("#inputPassword"),alert:document.querySelector(".alert"),logInBtn:document.querySelector("#log-in-btn"),logOutBtn:document.querySelector("#log-out-btn")}}showMsg(e){e&&(this.DOMElements.alert.classList.remove("hide"),this.DOMElements.alert.innerHTML=e)}hideMsg(){this.DOMElements.alert.classList.add("hide")}showLogout(){this.DOMElements.logOutBtn.classList.remove("hide")}hideLogout(){this.DOMElements.logOutBtn.classList.add("hide")}getCredentials(){return{login:this.DOMElements.login.value,password:this.DOMElements.password.value}}};
export default class GalleryController{constructor(e,t,i,s){this.model=e,this.view=t,this.observer=i,this.utils=s,this.pageConfig={itemsPerPage:10,currentPage:0},this.init()}initListeners(){this.view.DOMElements.userList.addEventListener("click",this.tableLineHandler.bind(this)),this.view.DOMElements.search.addEventListener("keyup",this.searchHandler.bind(this)),this.view.DOMElements.emailDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.roleDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.nextBtn.addEventListener("click",this.getNextPageHandler.bind(this))}tableLineHandler(e){e.preventDefault();let t=e.target.getAttribute("data-row-id");t?this.openDetail(t):this.view.selectTableLine(e)}openDetail(e){this.model.getUserById(e).then(e=>{this.view.showSingleUser(e)})}searchHandler(e){e.preventDefault();let t=e.target.value;13===e.keyCode&&(0==t.length||t.length>2)&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig.Find))}sortingHandler(e){e.preventDefault(),this.view.updateButtonText(e),this.applySortingMethod(this.view.getSortingType(e))}getNextPageHandler(e){e&&e.preventDefault(),this.view.buildUsersList(this.getNextPage()),this.isLastPage()}applySortingMethod(e){e&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig[e]))}getNextPage(){let e=this.pageConfig.itemsPerPage*this.pageConfig.currentPage,t=this.pageConfig.itemsPerPage+e;return this.pageConfig.currentPage++,this.model.usersListData.slice(e,t)}isLastPage(){this.isMaxPage()&&(this.view.hideNextPage(),this.countStats())}isMaxPage(){return this.pageConfig.currentPage*this.pageConfig.itemsPerPage>=this.model.usersListData.length}countStats(){let e=this.model.usersListData.reduce((e,t)=>("Admin"==t.role?e.admins++:e.users++,e),{admins:0,users:0});this.view.showStats(e)}init(){this.model.getUserList().then(e=>{this.initListeners(),this.view.buildUsersList(this.getNextPage()),this.isLastPage()})}};
export default class GalleryModel{constructor(){this.getUrl="http://localhost:3000/usersList",this.usersListData=[]}getUserList(){return fetch(this.getUrl).then(t=>t.json()).then(t=>(console.log("Data is loaded"),this.usersListData=t,t))}getUserById(t){return fetch(this.getUrl+"/"+t).then(t=>t.json()).then(t=>t)}saveUser(t){}updateUser(t){}};
export default class GalleryView{constructor(){this.DOMElements={userList:document.querySelector("#user-list"),selectAll:document.querySelector("#select-all"),statsInfo:document.querySelector("#stats"),emailDropdown:document.querySelector("#dropdown-email"),roleDropdown:document.querySelector("#dropdown-role"),search:document.querySelector("#inputSearch"),nextBtn:document.querySelector("#next-page"),backBtn:document.querySelector("#back-btn"),usersList:document.querySelectorAll(".users-list"),singleUser:document.querySelector(".single-user"),singleUserDetails:document.querySelector("#single-user-details")},this.counter=0,this.DOMElements.selectAll.addEventListener("click",this.selectAllItems.bind(this)),this.DOMElements.backBtn.addEventListener("click",this.hideSingleUser.bind(this))}tableTemplate(t){return`<tr>\n\t\t<th scope="row">\n\t\t  <input type="checkbox">\n\t\t</th>\n\t\t<th scope="row">${t.id}</th>\n\t\t<td>${t.name}</td>\n\t\t<td>${t.username}</td>\n\t\t<td>${t.role}</td>\n\t\t<td>${t.email}</td>\n\t\t<td data-toggle="tooltip" title="${t.address.zipcode}, ${t.address.city}, ${t.address.street}">${t.address.city}</td>\n\t\t<td>${t.website}</td>\n\t\t<td>\n\t\t\t<div class="text-center">\n\t\t\t\t<a href="#" data-row-id="${t.id}" class="btn btn-primary btn-sm">Открыть</a>\n\t  \t\t</div>\n\t  </td>\n\t  </tr>`}singleUserTemplate(t){return`<form class="needs-validation" novalidate="">\n\t\t<div class="row">\n\t\t  <div class="col-md-6 mb-3">\n\t\t\t<label for="firstName">Имя</label>\n\t\t\t<input type="text" class="form-control" value="${t.name}" readonly>\n\t\t  </div>\n\t\t  <div class="col-md-6 mb-3">\n\t\t\t<label for="lastName">Роль</label>\n\t\t\t<input type="text" class="form-control" value="${t.role}" readonly>\n\t\t  </div>\n\t\t</div>\n\t\t<div class="mb-3">\n\t\t  <label for="username">Логин</label>\n\t\t  <div class="input-group">\n\t\t\t<div class="input-group-prepend">\n\t\t\t  <span class="input-group-text">@</span>\n\t\t\t</div>\n\t\t\t<input type="text" class="form-control" value="${t.username}" readonly>\n\t\t  </div>\n\t\t</div>\n\t\t<div class="mb-3">\n\t\t  <label for="email">Email <span class="text-muted">(Опционально)</span></label>\n\t\t  <input type="email" class="form-control" value="${t.email}" readonly>\n\t\t</div>\n\t\t<div class="mb-3">\n\t\t  <label for="address">Адрес</label>\n\t\t  <input type="text" class="form-control" value="${t.address.zipcode}, ${t.address.city}, ${t.address.street}" readonly>\n\t\t</div>\n\t\t<div class="mb-3">\n\t\t  <label for="address2">Сайт</label>\n\t\t  <input type="text" class="form-control" value="${t.website}" readonly>\n\t\t</div>\n\t  </form>`}selectAllItems(){this.DOMElements.userList.querySelectorAll("input[type=checkbox]").forEach(t=>this.DOMElements.selectAll.checked?t.checked=!0:t.checked=!1)}selectTableLine(t){t.currentTarget.querySelectorAll("tr").forEach(t=>t.classList.remove("table-active")),t.target.closest("tr").classList.add("table-active")}clearList(){this.DOMElements.userList.innerHTML="",this.hideNextPage()}updateButtonText(t){t.currentTarget.querySelector("button").innerHTML=t.target.innerText}getSortingType(t){return t.target.getAttribute("sorting-type")}blockNextPage(){this.DOMElements.nextBtn.classList.add("disabled")}hideNextPage(){this.DOMElements.nextBtn.classList.add("hide")}showStats(t){this.DOMElements.statsInfo.innerHTML=`Статистика системы. Админов: ${t.admins}, Пользователей: ${t.users}`}buildUsersList(t,e){e&&(t=e(t));let s=t.map(t=>this.tableTemplate(t));this.DOMElements.userList.innerHTML+=s.join("")}showSingleUser(t){this.DOMElements.usersList.forEach(t=>t.classList.add("hide")),this.DOMElements.singleUser.classList.remove("hide"),this.DOMElements.singleUserDetails.innerHTML=this.singleUserTemplate(t)}hideSingleUser(){this.DOMElements.singleUser.classList.add("hide"),this.DOMElements.usersList.forEach(t=>t.classList.remove("hide"))}};
export default class Observer{constructor(){this.events={}}subscribeEvent(e,s){this.events[e]=s}callEvent(e,s){this.events[e]&&this.events[e](s)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInJvdXRlci5qcyIsInV0aWxzLmpzIiwibG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luLm1vZGVsLmpzIiwibG9naW4vbG9naW4udmlldy5qcyIsImdhbGxlcnkvZ2FsbGVyeS5jb250cm9sbGVyLmpzIiwiZ2FsbGVyeS9nYWxsZXJ5Lm1vZGVsLmpzIiwiZ2FsbGVyeS9nYWxsZXJ5LnZpZXcuanMiLCJnYWxsZXJ5L29ic2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUNBQTtBQ0FBO0FDQUE7QUNBQTtBQ0FBO0FDQUE7QUNBQTtBQ0FBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e3VwZGF0ZVJvdXRlfWZyb21cIi4vcm91dGVyLmpzXCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdXBkYXRlUm91dGUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLHVwZGF0ZVJvdXRlKTsiLCJpbXBvcnQgdXRpbHMgZnJvbVwiLi91dGlscy5qc1wiO2ltcG9ydCBPYnNlcnZlciBmcm9tXCIuL2dhbGxlcnkvb2JzZXJ2ZXIuanNcIjtpbXBvcnQgR2FsbGVyeUNvbnRyb2xsZXIgZnJvbVwiLi9nYWxsZXJ5L2dhbGxlcnkuY29udHJvbGxlci5qc1wiO2ltcG9ydCBHYWxsZXJ5TW9kZWwgZnJvbVwiLi9nYWxsZXJ5L2dhbGxlcnkubW9kZWwuanNcIjtpbXBvcnQgR2FsbGVyeVZpZXcgZnJvbVwiLi9nYWxsZXJ5L2dhbGxlcnkudmlldy5qc1wiO2ltcG9ydCBMb2dpbkNvbnRyb2xsZXIgZnJvbVwiLi9sb2dpbi9sb2dpbi5jb250cm9sbGVyLmpzXCI7aW1wb3J0IExvZ2luTW9kZWwgZnJvbVwiLi9sb2dpbi9sb2dpbi5tb2RlbC5qc1wiO2ltcG9ydCBMb2dpblZpZXcgZnJvbVwiLi9sb2dpbi9sb2dpbi52aWV3LmpzXCI7bGV0IGxvZ2luPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbG9naW4tdmlld1wiKSxtYWluPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi12aWV3XCIpLGNvbnRhY3Q9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWN0LXZpZXdcIiksYWN0aXZhdGVkUm91dGVzPXt9LHJvdXRlQ29uZmlnPXtcIlwiOntzaG93OigpPT57dXRpbHMuc2hvd1ZpZXcoW2xvZ2luXSksdXRpbHMuaGlkZVZpZXcoW21haW4sY29udGFjdF0pfSxpbml0OigpPT57bGV0IGU9bmV3IExvZ2luTW9kZWwsbz1uZXcgTG9naW5WaWV3O25ldyBMb2dpbkNvbnRyb2xsZXIoZSxvLHV0aWxzKX19LGdhbGxlcnk6e3Nob3c6KCk9Pnt1dGlscy5zaG93VmlldyhbbWFpbl0pLHV0aWxzLmhpZGVWaWV3KFtsb2dpbixjb250YWN0XSksY29uc29sZS5sb2coXCJNYWluIHJvdXRlIGlzIGxvYWRlZFwiKX0saW5pdDooKT0+e2xldCBlPW5ldyBPYnNlcnZlcixvPW5ldyBHYWxsZXJ5TW9kZWwsbD1uZXcgR2FsbGVyeVZpZXc7bmV3IEdhbGxlcnlDb250cm9sbGVyKG8sbCxlLG5ldyB1dGlscyl9fSxjb250YWN0czp7c2hvdzooKT0+e3V0aWxzLnNob3dWaWV3KFtjb250YWN0XSksdXRpbHMuaGlkZVZpZXcoW21haW4sbG9naW5dKSxjb25zb2xlLmxvZyhcIkNvbnRhY3RzIHJvdXRlIGlzIGxvYWRlZFwiKX0saW5pdDooKT0+e319fTtmdW5jdGlvbiBhY3RpdmF0ZVJvdXRlKGUpe2lmKGFjdGl2YXRlZFJvdXRlc1tlXSlhY3RpdmF0ZWRSb3V0ZXNbZV0oKTtlbHNle2xldCBvPXJvdXRlQ29uZmlnW2VdO28mJihvLmluaXQoKSxvLnNob3coKSxhY3RpdmF0ZWRSb3V0ZXNbZV09by5zaG93KX19ZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJvdXRlKCl7bGV0IGU9ZG9jdW1lbnQubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sXCJcIik7ZSYmIXV0aWxzLmlzTG9nZ2VkSW4oKT91dGlscy5uYXZpZ2F0ZVRvKFwiXCIpOmFjdGl2YXRlUm91dGUoZSl9OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxze2NvbnN0cnVjdG9yKCl7dGhpcy5zb3J0aW5nQ29uZmlnPXtBOmU9PihlLnNvcnQoKGUsdCk9PmUuZW1haWw+dC5lbWFpbD8xOi0xKSxlKSxaOmU9PihlLnNvcnQoKGUsdCk9PmUuZW1haWw8dC5lbWFpbD8xOi0xKSxlKSxBZG1pbjplPT5lLmZpbHRlcihlPT5cIkFkbWluXCI9PWUucm9sZSksVXNlcjplPT5lLmZpbHRlcihlPT5cIlVzZXJcIj09ZS5yb2xlKSxGaW5kOmU9PntsZXQgdD1uZXcgUmVnRXhwKGV2ZW50LnRhcmdldC52YWx1ZSxcImlcIik7cmV0dXJuIGUuZmlsdGVyKGU9PnQudGVzdChlLm5hbWUpKX19fXN0YXRpYyBzaG93VmlldyhlKXtlLmZvckVhY2goZT0+e2UuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIil9KX1zdGF0aWMgaGlkZVZpZXcoZSl7ZS5mb3JFYWNoKGU9PntlLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpfSl9c3RhdGljIG5hdmlnYXRlVG8oZSl7d2luZG93LmxvY2F0aW9uLmhhc2g9XCIjXCIrZX1zdGF0aWMgaXNMb2dnZWRJbigpe3JldHVybiEhSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNyZWRlbnRpYWxzXCIpKX19OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luQ29udHJvbGxlcntjb25zdHJ1Y3Rvcih0LGksZSl7dGhpcy5tb2RlbD10LHRoaXMudmlldz1pLHRoaXMudXRpbHM9ZSx0aGlzLmluaXRMaXN0ZW5lcnMoKX1pbml0TGlzdGVuZXJzKCl7dGhpcy52aWV3LkRPTUVsZW1lbnRzLmxvZ0luQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMubG9naW5IYW5kbGVyLmJpbmQodGhpcykpLHRoaXMudmlldy5ET01FbGVtZW50cy5sb2dPdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5sb2dvdXRIYW5kbGVyLmJpbmQodGhpcykpfWxvZ2luSGFuZGxlcih0KXt0LnByZXZlbnREZWZhdWx0KCk7bGV0IGk9dGhpcy52aWV3LmdldENyZWRlbnRpYWxzKCk7dGhpcy5tb2RlbC52YWxpZGF0ZShpKT90aGlzLm1vZGVsLmxvZ2luKGkpLnRoZW4odD0+e3QubG9naW5TdGF0dXM/KHRoaXMudmlldy5oaWRlTXNnKCksdGhpcy52aWV3LnNob3dMb2dvdXQoKSx0aGlzLnV0aWxzLm5hdmlnYXRlVG8oXCJnYWxsZXJ5XCIpKTp0aGlzLnZpZXcuc2hvd01zZyh0aGlzLm1vZGVsLmdldEVycm9yTXNnKCkpfSk6dGhpcy52aWV3LnNob3dNc2codGhpcy5tb2RlbC5nZXRFcnJvck1zZygpKX1sb2dvdXRIYW5kbGVyKCl7dGhpcy52aWV3LmhpZGVMb2dvdXQoKSx0aGlzLm1vZGVsLmxvZ291dCgpLHRoaXMudXRpbHMubmF2aWdhdGVUbyhcIlwiKX19OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luTW9kZWx7Y29uc3RydWN0b3IoKXt0aGlzLmxvZ2luVXJsPVwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2xvZ2luXCIsdGhpcy5lbWFpbFBhdHRlcm49L15cXHcrQFxcdytcXC5cXHd7Miw0fSQvaSx0aGlzLnBhc3N3b3JkUGF0dGVybj0vXlthLXpBLVowLTldezgsMzB9JC8sdGhpcy5lcnJvck1zZz1udWxsLHRoaXMuZXJyb3JNc2dNYXA9e2VtcHR5Olwi0J/QvtC20LDQu9GD0LnRgdGC0LAg0LfQsNC/0L7Qu9C90LjRgtC1INC/0L7Qu9GPINC70L7Qs9C40L0g0Lgg0L/QsNGA0L7Qu9GMXCIsbG9naW5FcnJvcjpcItCb0L7Qs9C40L0g0LLQstC10LTQtdC9INC90LXQstC10YDQvdC+LiDQotC+0LvRjNC60L4g0LvQsNGC0LjQvdGB0LrQuNC1INCx0YPQutCy0YsuXCIscGFzc0Vycm9yOlwi0J/QsNGA0L7Qu9GMINCy0LLQtdC00LXQvSDQvdC10LLQtdGA0L3Qvi4g0KLQvtC70YzQuiDQu9Cw0YLQuNC90YHQutC40LUg0LHRg9C60LLRiywg0YbQuNGE0YDRiy4g0JTQu9C40L3QsCDQvdC1INC80LXQvdC10LUgOCDRgdC40LzQstC+0LvQvtCyXCIsbWlzc21hdGNoOlwi0J3QtdC/0YDQsNCy0LjQu9GM0L3Ri9C1INC70L7Qs9C40L0g0LjQu9C4INC/0LDRgNC+0LvRjC5cIn19dmFsaWRhdGUodCl7cmV0dXJuIHRoaXMuaXNFbXB0eSh0KSYmdGhpcy5pc0VtYWlsQXNzZXJ0UGF0dGVybih0KSYmdGhpcy5pc1Bhc3N3b3JkQXNzZXJ0UGF0dGVybih0KX1sb2dpbih0KXtsZXQgcj17aGVhZGVyczp7XCJDb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIn0sbWV0aG9kOlwicG9zdFwiLGJvZHk6SlNPTi5zdHJpbmdpZnkodCl9O3JldHVybiBmZXRjaCh0aGlzLmxvZ2luVXJsLHIpLnRoZW4odD0+dC5qc29uKCkpLnRoZW4ocj0+KHIubG9naW5TdGF0dXM/bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjcmVkZW50aWFsc1wiLEpTT04uc3RyaW5naWZ5KHQpKTp0aGlzLnNldEVycm9yTXNnKFwibWlzc21hdGNoXCIpLHIpKX1nZXRFcnJvck1zZygpe3JldHVybiB0aGlzLmVycm9yTXNnfXNldEVycm9yTXNnKHQpe3JldHVybiB0aGlzLmVycm9yTXNnPXRoaXMuZXJyb3JNc2dNYXBbdF0sITF9aXNFbXB0eSh0KXtyZXR1cm4gdC5sb2dpbiYmdC5wYXNzd29yZHx8dGhpcy5zZXRFcnJvck1zZyhcImVtcHR5XCIpfWlzRW1haWxBc3NlcnRQYXR0ZXJuKHQpe3JldHVybiB0aGlzLmVtYWlsUGF0dGVybi50ZXN0KHQubG9naW4pfHx0aGlzLnNldEVycm9yTXNnKFwibG9naW5FcnJvclwiKX1pc1Bhc3N3b3JkQXNzZXJ0UGF0dGVybih0KXtyZXR1cm4gdGhpcy5wYXNzd29yZFBhdHRlcm4udGVzdCh0LnBhc3N3b3JkKXx8dGhpcy5zZXRFcnJvck1zZyhcInBhc3NFcnJvclwiKX1sb2dvdXQoKXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNyZWRlbnRpYWxzXCIpfX07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5WaWV3e2NvbnN0cnVjdG9yKCl7dGhpcy5ET01FbGVtZW50cz17bG9naW46ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dEVtYWlsXCIpLHBhc3N3b3JkOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRQYXNzd29yZFwiKSxhbGVydDpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsZXJ0XCIpLGxvZ0luQnRuOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbG9nLWluLWJ0blwiKSxsb2dPdXRCdG46ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsb2ctb3V0LWJ0blwiKX19c2hvd01zZyhlKXtlJiYodGhpcy5ET01FbGVtZW50cy5hbGVydC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKSx0aGlzLkRPTUVsZW1lbnRzLmFsZXJ0LmlubmVySFRNTD1lKX1oaWRlTXNnKCl7dGhpcy5ET01FbGVtZW50cy5hbGVydC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKX1zaG93TG9nb3V0KCl7dGhpcy5ET01FbGVtZW50cy5sb2dPdXRCdG4uY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIil9aGlkZUxvZ291dCgpe3RoaXMuRE9NRWxlbWVudHMubG9nT3V0QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpfWdldENyZWRlbnRpYWxzKCl7cmV0dXJue2xvZ2luOnRoaXMuRE9NRWxlbWVudHMubG9naW4udmFsdWUscGFzc3dvcmQ6dGhpcy5ET01FbGVtZW50cy5wYXNzd29yZC52YWx1ZX19fTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5Q29udHJvbGxlcntjb25zdHJ1Y3RvcihlLHQsaSxzKXt0aGlzLm1vZGVsPWUsdGhpcy52aWV3PXQsdGhpcy5vYnNlcnZlcj1pLHRoaXMudXRpbHM9cyx0aGlzLnBhZ2VDb25maWc9e2l0ZW1zUGVyUGFnZToxMCxjdXJyZW50UGFnZTowfSx0aGlzLmluaXQoKX1pbml0TGlzdGVuZXJzKCl7dGhpcy52aWV3LkRPTUVsZW1lbnRzLnVzZXJMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMudGFibGVMaW5lSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLnZpZXcuRE9NRWxlbWVudHMuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLHRoaXMuc2VhcmNoSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLnZpZXcuRE9NRWxlbWVudHMuZW1haWxEcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLnNvcnRpbmdIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMudmlldy5ET01FbGVtZW50cy5yb2xlRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5zb3J0aW5nSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLnZpZXcuRE9NRWxlbWVudHMubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmdldE5leHRQYWdlSGFuZGxlci5iaW5kKHRoaXMpKX10YWJsZUxpbmVIYW5kbGVyKGUpe2UucHJldmVudERlZmF1bHQoKTtsZXQgdD1lLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJvdy1pZFwiKTt0P3RoaXMub3BlbkRldGFpbCh0KTp0aGlzLnZpZXcuc2VsZWN0VGFibGVMaW5lKGUpfW9wZW5EZXRhaWwoZSl7dGhpcy5tb2RlbC5nZXRVc2VyQnlJZChlKS50aGVuKGU9Pnt0aGlzLnZpZXcuc2hvd1NpbmdsZVVzZXIoZSl9KX1zZWFyY2hIYW5kbGVyKGUpe2UucHJldmVudERlZmF1bHQoKTtsZXQgdD1lLnRhcmdldC52YWx1ZTsxMz09PWUua2V5Q29kZSYmKDA9PXQubGVuZ3RofHx0Lmxlbmd0aD4yKSYmKHRoaXMucGFnZUNvbmZpZy5jdXJyZW50UGFnZT0wLHRoaXMudmlldy5jbGVhckxpc3QoKSx0aGlzLnZpZXcuYnVpbGRVc2Vyc0xpc3QodGhpcy5nZXROZXh0UGFnZSgpLHRoaXMudXRpbHMuc29ydGluZ0NvbmZpZy5GaW5kKSl9c29ydGluZ0hhbmRsZXIoZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudmlldy51cGRhdGVCdXR0b25UZXh0KGUpLHRoaXMuYXBwbHlTb3J0aW5nTWV0aG9kKHRoaXMudmlldy5nZXRTb3J0aW5nVHlwZShlKSl9Z2V0TmV4dFBhZ2VIYW5kbGVyKGUpe2UmJmUucHJldmVudERlZmF1bHQoKSx0aGlzLnZpZXcuYnVpbGRVc2Vyc0xpc3QodGhpcy5nZXROZXh0UGFnZSgpKSx0aGlzLmlzTGFzdFBhZ2UoKX1hcHBseVNvcnRpbmdNZXRob2QoZSl7ZSYmKHRoaXMucGFnZUNvbmZpZy5jdXJyZW50UGFnZT0wLHRoaXMudmlldy5jbGVhckxpc3QoKSx0aGlzLnZpZXcuYnVpbGRVc2Vyc0xpc3QodGhpcy5nZXROZXh0UGFnZSgpLHRoaXMudXRpbHMuc29ydGluZ0NvbmZpZ1tlXSkpfWdldE5leHRQYWdlKCl7bGV0IGU9dGhpcy5wYWdlQ29uZmlnLml0ZW1zUGVyUGFnZSp0aGlzLnBhZ2VDb25maWcuY3VycmVudFBhZ2UsdD10aGlzLnBhZ2VDb25maWcuaXRlbXNQZXJQYWdlK2U7cmV0dXJuIHRoaXMucGFnZUNvbmZpZy5jdXJyZW50UGFnZSsrLHRoaXMubW9kZWwudXNlcnNMaXN0RGF0YS5zbGljZShlLHQpfWlzTGFzdFBhZ2UoKXt0aGlzLmlzTWF4UGFnZSgpJiYodGhpcy52aWV3LmhpZGVOZXh0UGFnZSgpLHRoaXMuY291bnRTdGF0cygpKX1pc01heFBhZ2UoKXtyZXR1cm4gdGhpcy5wYWdlQ29uZmlnLmN1cnJlbnRQYWdlKnRoaXMucGFnZUNvbmZpZy5pdGVtc1BlclBhZ2U+PXRoaXMubW9kZWwudXNlcnNMaXN0RGF0YS5sZW5ndGh9Y291bnRTdGF0cygpe2xldCBlPXRoaXMubW9kZWwudXNlcnNMaXN0RGF0YS5yZWR1Y2UoKGUsdCk9PihcIkFkbWluXCI9PXQucm9sZT9lLmFkbWlucysrOmUudXNlcnMrKyxlKSx7YWRtaW5zOjAsdXNlcnM6MH0pO3RoaXMudmlldy5zaG93U3RhdHMoZSl9aW5pdCgpe3RoaXMubW9kZWwuZ2V0VXNlckxpc3QoKS50aGVuKGU9Pnt0aGlzLmluaXRMaXN0ZW5lcnMoKSx0aGlzLnZpZXcuYnVpbGRVc2Vyc0xpc3QodGhpcy5nZXROZXh0UGFnZSgpKSx0aGlzLmlzTGFzdFBhZ2UoKX0pfX07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeU1vZGVse2NvbnN0cnVjdG9yKCl7dGhpcy5nZXRVcmw9XCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdXNlcnNMaXN0XCIsdGhpcy51c2Vyc0xpc3REYXRhPVtdfWdldFVzZXJMaXN0KCl7cmV0dXJuIGZldGNoKHRoaXMuZ2V0VXJsKS50aGVuKHQ9PnQuanNvbigpKS50aGVuKHQ9Pihjb25zb2xlLmxvZyhcIkRhdGEgaXMgbG9hZGVkXCIpLHRoaXMudXNlcnNMaXN0RGF0YT10LHQpKX1nZXRVc2VyQnlJZCh0KXtyZXR1cm4gZmV0Y2godGhpcy5nZXRVcmwrXCIvXCIrdCkudGhlbih0PT50Lmpzb24oKSkudGhlbih0PT50KX1zYXZlVXNlcih0KXt9dXBkYXRlVXNlcih0KXt9fTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5Vmlld3tjb25zdHJ1Y3Rvcigpe3RoaXMuRE9NRWxlbWVudHM9e3VzZXJMaXN0OmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdXNlci1saXN0XCIpLHNlbGVjdEFsbDpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlbGVjdC1hbGxcIiksc3RhdHNJbmZvOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3RhdHNcIiksZW1haWxEcm9wZG93bjpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Ryb3Bkb3duLWVtYWlsXCIpLHJvbGVEcm9wZG93bjpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Ryb3Bkb3duLXJvbGVcIiksc2VhcmNoOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRTZWFyY2hcIiksbmV4dEJ0bjpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25leHQtcGFnZVwiKSxiYWNrQnRuOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYmFjay1idG5cIiksdXNlcnNMaXN0OmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudXNlcnMtbGlzdFwiKSxzaW5nbGVVc2VyOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2luZ2xlLXVzZXJcIiksc2luZ2xlVXNlckRldGFpbHM6ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzaW5nbGUtdXNlci1kZXRhaWxzXCIpfSx0aGlzLmNvdW50ZXI9MCx0aGlzLkRPTUVsZW1lbnRzLnNlbGVjdEFsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLnNlbGVjdEFsbEl0ZW1zLmJpbmQodGhpcykpLHRoaXMuRE9NRWxlbWVudHMuYmFja0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmhpZGVTaW5nbGVVc2VyLmJpbmQodGhpcykpfXRhYmxlVGVtcGxhdGUodCl7cmV0dXJuYDx0cj5cXG5cXHRcXHQ8dGggc2NvcGU9XCJyb3dcIj5cXG5cXHRcXHQgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIj5cXG5cXHRcXHQ8L3RoPlxcblxcdFxcdDx0aCBzY29wZT1cInJvd1wiPiR7dC5pZH08L3RoPlxcblxcdFxcdDx0ZD4ke3QubmFtZX08L3RkPlxcblxcdFxcdDx0ZD4ke3QudXNlcm5hbWV9PC90ZD5cXG5cXHRcXHQ8dGQ+JHt0LnJvbGV9PC90ZD5cXG5cXHRcXHQ8dGQ+JHt0LmVtYWlsfTwvdGQ+XFxuXFx0XFx0PHRkIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIHRpdGxlPVwiJHt0LmFkZHJlc3MuemlwY29kZX0sICR7dC5hZGRyZXNzLmNpdHl9LCAke3QuYWRkcmVzcy5zdHJlZXR9XCI+JHt0LmFkZHJlc3MuY2l0eX08L3RkPlxcblxcdFxcdDx0ZD4ke3Qud2Vic2l0ZX08L3RkPlxcblxcdFxcdDx0ZD5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cXG5cXHRcXHRcXHRcXHQ8YSBocmVmPVwiI1wiIGRhdGEtcm93LWlkPVwiJHt0LmlkfVwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbVwiPtCe0YLQutGA0YvRgtGMPC9hPlxcblxcdCAgXFx0XFx0PC9kaXY+XFxuXFx0ICA8L3RkPlxcblxcdCAgPC90cj5gfXNpbmdsZVVzZXJUZW1wbGF0ZSh0KXtyZXR1cm5gPGZvcm0gY2xhc3M9XCJuZWVkcy12YWxpZGF0aW9uXCIgbm92YWxpZGF0ZT1cIlwiPlxcblxcdFxcdDxkaXYgY2xhc3M9XCJyb3dcIj5cXG5cXHRcXHQgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBtYi0zXCI+XFxuXFx0XFx0XFx0PGxhYmVsIGZvcj1cImZpcnN0TmFtZVwiPtCY0LzRjzwvbGFiZWw+XFxuXFx0XFx0XFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB2YWx1ZT1cIiR7dC5uYW1lfVwiIHJlYWRvbmx5PlxcblxcdFxcdCAgPC9kaXY+XFxuXFx0XFx0ICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgbWItM1wiPlxcblxcdFxcdFxcdDxsYWJlbCBmb3I9XCJsYXN0TmFtZVwiPtCg0L7Qu9GMPC9sYWJlbD5cXG5cXHRcXHRcXHQ8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHZhbHVlPVwiJHt0LnJvbGV9XCIgcmVhZG9ubHk+XFxuXFx0XFx0ICA8L2Rpdj5cXG5cXHRcXHQ8L2Rpdj5cXG5cXHRcXHQ8ZGl2IGNsYXNzPVwibWItM1wiPlxcblxcdFxcdCAgPGxhYmVsIGZvcj1cInVzZXJuYW1lXCI+0JvQvtCz0LjQvTwvbGFiZWw+XFxuXFx0XFx0ICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAtcHJlcGVuZFwiPlxcblxcdFxcdFxcdCAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0XCI+QDwvc3Bhbj5cXG5cXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHRcXHQ8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHZhbHVlPVwiJHt0LnVzZXJuYW1lfVwiIHJlYWRvbmx5PlxcblxcdFxcdCAgPC9kaXY+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PGRpdiBjbGFzcz1cIm1iLTNcIj5cXG5cXHRcXHQgIDxsYWJlbCBmb3I9XCJlbWFpbFwiPkVtYWlsIDxzcGFuIGNsYXNzPVwidGV4dC1tdXRlZFwiPijQntC/0YbQuNC+0L3QsNC70YzQvdC+KTwvc3Bhbj48L2xhYmVsPlxcblxcdFxcdCAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdmFsdWU9XCIke3QuZW1haWx9XCIgcmVhZG9ubHk+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PGRpdiBjbGFzcz1cIm1iLTNcIj5cXG5cXHRcXHQgIDxsYWJlbCBmb3I9XCJhZGRyZXNzXCI+0JDQtNGA0LXRgTwvbGFiZWw+XFxuXFx0XFx0ICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHZhbHVlPVwiJHt0LmFkZHJlc3MuemlwY29kZX0sICR7dC5hZGRyZXNzLmNpdHl9LCAke3QuYWRkcmVzcy5zdHJlZXR9XCIgcmVhZG9ubHk+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PGRpdiBjbGFzcz1cIm1iLTNcIj5cXG5cXHRcXHQgIDxsYWJlbCBmb3I9XCJhZGRyZXNzMlwiPtCh0LDQudGCPC9sYWJlbD5cXG5cXHRcXHQgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdmFsdWU9XCIke3Qud2Vic2l0ZX1cIiByZWFkb25seT5cXG5cXHRcXHQ8L2Rpdj5cXG5cXHQgIDwvZm9ybT5gfXNlbGVjdEFsbEl0ZW1zKCl7dGhpcy5ET01FbGVtZW50cy51c2VyTGlzdC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT1jaGVja2JveF1cIikuZm9yRWFjaCh0PT50aGlzLkRPTUVsZW1lbnRzLnNlbGVjdEFsbC5jaGVja2VkP3QuY2hlY2tlZD0hMDp0LmNoZWNrZWQ9ITEpfXNlbGVjdFRhYmxlTGluZSh0KXt0LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvckFsbChcInRyXCIpLmZvckVhY2godD0+dC5jbGFzc0xpc3QucmVtb3ZlKFwidGFibGUtYWN0aXZlXCIpKSx0LnRhcmdldC5jbG9zZXN0KFwidHJcIikuY2xhc3NMaXN0LmFkZChcInRhYmxlLWFjdGl2ZVwiKX1jbGVhckxpc3QoKXt0aGlzLkRPTUVsZW1lbnRzLnVzZXJMaXN0LmlubmVySFRNTD1cIlwiLHRoaXMuaGlkZU5leHRQYWdlKCl9dXBkYXRlQnV0dG9uVGV4dCh0KXt0LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKS5pbm5lckhUTUw9dC50YXJnZXQuaW5uZXJUZXh0fWdldFNvcnRpbmdUeXBlKHQpe3JldHVybiB0LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJzb3J0aW5nLXR5cGVcIil9YmxvY2tOZXh0UGFnZSgpe3RoaXMuRE9NRWxlbWVudHMubmV4dEJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIil9aGlkZU5leHRQYWdlKCl7dGhpcy5ET01FbGVtZW50cy5uZXh0QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpfXNob3dTdGF0cyh0KXt0aGlzLkRPTUVsZW1lbnRzLnN0YXRzSW5mby5pbm5lckhUTUw9YNCh0YLQsNGC0LjRgdGC0LjQutCwINGB0LjRgdGC0LXQvNGLLiDQkNC00LzQuNC90L7QsjogJHt0LmFkbWluc30sINCf0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5OiAke3QudXNlcnN9YH1idWlsZFVzZXJzTGlzdCh0LGUpe2UmJih0PWUodCkpO2xldCBzPXQubWFwKHQ9PnRoaXMudGFibGVUZW1wbGF0ZSh0KSk7dGhpcy5ET01FbGVtZW50cy51c2VyTGlzdC5pbm5lckhUTUwrPXMuam9pbihcIlwiKX1zaG93U2luZ2xlVXNlcih0KXt0aGlzLkRPTUVsZW1lbnRzLnVzZXJzTGlzdC5mb3JFYWNoKHQ9PnQuY2xhc3NMaXN0LmFkZChcImhpZGVcIikpLHRoaXMuRE9NRWxlbWVudHMuc2luZ2xlVXNlci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKSx0aGlzLkRPTUVsZW1lbnRzLnNpbmdsZVVzZXJEZXRhaWxzLmlubmVySFRNTD10aGlzLnNpbmdsZVVzZXJUZW1wbGF0ZSh0KX1oaWRlU2luZ2xlVXNlcigpe3RoaXMuRE9NRWxlbWVudHMuc2luZ2xlVXNlci5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKSx0aGlzLkRPTUVsZW1lbnRzLnVzZXJzTGlzdC5mb3JFYWNoKHQ9PnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIikpfX07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgT2JzZXJ2ZXJ7Y29uc3RydWN0b3IoKXt0aGlzLmV2ZW50cz17fX1zdWJzY3JpYmVFdmVudChlLHMpe3RoaXMuZXZlbnRzW2VdPXN9Y2FsbEV2ZW50KGUscyl7dGhpcy5ldmVudHNbZV0mJnRoaXMuZXZlbnRzW2VdKHMpfX07Il19
